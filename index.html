<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Geotiff重畳</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js"></script>
    <script src="./dist/geotiff-viewer.js"></script>
</head>

<body>
    <div id="map" style="width:600px;height:600px"></div>
    <button id="remove">click</button>
</body>
<script>
    var map = L.map('map').setView([0, 0], 5);

    L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);
    var url = "https://stuartmatthews.github.io/leaflet-geotiff/tif/wind_speed.tif";

    var options = {
        pixelValuesToColorFn: function (pixelValue) {
            var colorScale = RawImage.colorScale({
                range: [0, 30]
            });
            var v = pixelValue[0]
            if (v < 0) return null;
            if (v > 30) return 30;
            return colorScale(v);
        }
    };

    function cb(layer) {
        map.addLayer(layer);
        map.fitBounds(layer.getBounds());
        document.getElementById('remove').addEventListener("click", (e) => {
            map.removeLayer(layer);
        });
    }

    RawImage.geotiff.leafletLayer(url, options, cb);
</script>

</html>